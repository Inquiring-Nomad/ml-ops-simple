schema: '2.0'
stages:
  load_save_data:
    cmd: python src/data/make_dataset.py --config=params.yaml
    deps:
    - path: src/data/make_dataset.py
      md5: 0757bd193ac9f96c9ad7b02ae3185b12
      size: 1447
    - path: training_data/housing.csv
      md5: d1c47305887e2252bf1ccbd74ff159a6
      size: 1423529
    outs:
    - path: data/raw/housing.csv
      md5: d1c47305887e2252bf1ccbd74ff159a6
      size: 1423529
  split_data:
    cmd: python src/data/split.py --config=params.yaml
    deps:
    - path: data/raw/housing.csv
      md5: d1c47305887e2252bf1ccbd74ff159a6
      size: 1423529
    - path: src/data/split.py
      md5: 8693541efdaa925b7f8e547ec646516b
      size: 1129
    outs:
    - path: data/processed/test_housing.csv
      md5: b17743d8dd9ae6d52668be0ccef2d51c
      size: 283842
    - path: data/processed/train_housing.csv
      md5: 55f235b479b00622c24072ff580ab951
      size: 1139823
  visualise_data:
    cmd: python src/visualization/data_vis.py --config=params.yaml
    deps:
    - path: data/processed/train_housing.csv
      md5: 55f235b479b00622c24072ff580ab951
      size: 1139823
    - path: src/visualization/data_vis.py
      md5: 6d71c57e07760944bf59604f93f5e771
      size: 1054
    outs:
    - path: reports/figures/eda/profiling.html
      md5: ffffcb601e4a106288d6622bb206fe82
      size: 5110579
  feauturise_data:
    cmd: python src/features/data_feat.py --config=params.yaml
    deps:
    - path: data/processed/train_housing.csv
      md5: 55f235b479b00622c24072ff580ab951
      size: 1139823
    - path: src/features/data_feat.py
      md5: 837330ca0389d3a5380bc7c5198a1fe7
      size: 2150
    outs:
    - path: data/processed/train_housing_pre.npy
      md5: 82e7d5347cbcd1f6c1f765b97a6f3302
      size: 1717376
    - path: models/pipeline
      md5: 2abf94bd3e9ba63788f04296674e058e
      size: 2065
  train:
    cmd: python src/models/train_model.py --config=params.yaml
    deps:
    - path: data/processed/train_housing_pre.npy
      md5: 82e7d5347cbcd1f6c1f765b97a6f3302
      size: 1717376
    - path: src/models/train_model.py
      md5: ea83d16095b4985593131ec5cfe0655d
      size: 3399
    params:
      params.yaml:
        estimators.LinearRegression.cross_val_cv: 5
        estimators.RandomForestReg.param_grid.max_features:
        - 2
        - 4
        - 5
        - 8
        estimators.RandomForestReg.param_grid.n_estimators:
        - 3
        - 10
        - 30
    outs:
    - path: models/linear_regression.joblib
      md5: c55e9a896bba40513a4b9206fdd8d7e5
      size: 760
    - path: models/rfr.joblib
      md5: 8f68c59839b1ba3e3ed52417b0d08df0
      size: 38565100
    - path: reports/linreg_cross_val_scores.json
      md5: a93deb2794b8bb3f84475da62f6a8783
      size: 33
    - path: reports/rfr_cross_val_scores.json
      md5: 537d03a9706a3cd5eb35e16cfcdfef27
      size: 33
  evaluate:
    cmd: python src/models/eval_model.py --config=params.yaml
    deps:
    - path: data/processed/test_housing.csv
      md5: b17743d8dd9ae6d52668be0ccef2d51c
      size: 283842
    - path: models/linear_regression.joblib
      md5: c55e9a896bba40513a4b9206fdd8d7e5
      size: 760
    - path: models/pipeline
      md5: 2abf94bd3e9ba63788f04296674e058e
      size: 2065
    - path: src/models/eval_model.py
      md5: 2b7ce9759f04a24e5ee443b5784a6b62
      size: 2482
    outs:
    - path: reports/linreg_eval_scores.json
      md5: bced539f8491ed5aacf178e3ad53d9d9
      size: 90
    - path: reports/rfr_eval_scores.json
      md5: cde3564348f288d96633a54edd01af28
      size: 94
